<div class="container-flui">

  <!-- ====== Overview Section ====== -->
  <!-- <div class=" card border-0 p-2  mb-2">

    <h5 class="fw-bold mb-3">Indent Request Overview</h5>

    <div class="d-flex justify-content-start align-items-start gap-4">

      <div class="d-flex flex-column pe-4 border-end">
        <div class="text-muted">Total Requests</div>
        <div class="fw-bold fs-4">23</div>
      </div>

      <div class="d-flex flex-column pe-4 border-end">
        <div class="text-muted">InProgress</div>
        <div class="fw-bold fs-4">10</div>
      </div>

      <div class="d-flex flex-column pe-4 border-end">
        <div class="text-muted">Approved</div>
        <div class="fw-bold fs-4">3</div>
      </div>

      <div class="d-flex flex-column pe-4 border-end">
        <div class="text-muted">PO Created</div>
        <div class="fw-bold fs-4">8</div>
      </div>

      <div class="d-flex flex-column">
        <div class="text-muted">Rejected</div>
        <div class="fw-bold fs-4">2</div>
      </div>

    </div>

  </div> -->

  <div class="card border-0 p-2 mt-1">
    <div class="d-flex justify-content-between align-items-center mb-2">

      <!-- Title -->
      <h5 class="fw-bold mb-0">Indent Request List <span class="custom-text">({{tableData.length || 0}})</span></h5>

      <div class="d-flex align-items-center gap-2">

        <!-- Small Search Box -->
        <!-- <div class="input-group input-group-sm" style="width: 260px;">
          <input type="search" class="form-control" placeholder="Search with Indent No., Plant, Material Code">
          <span class="input-group-text">
            <i class="bi bi-search"></i>
          </span>
        </div> -->

        <div>
          <div class="d-flex align-items-center gap-3 px-3 py-2 border rounded-pill shadow-sm bg-white">

            <!-- From Date -->
            <!-- From Date -->
            <span style="font-size: 11px; font-weight: 600;">From</span>
            <input #fromDateInput type="date" class="form-control form-control-sm border-0 p-0"
              style="font-size: 12px; height: 20px; width: 130px;" (change)="onFromDateChange(fromDateInput.value)" />

            <div class="vr" style="height: 26px;"></div>

            <!-- To Date -->
            <span style="font-size: 11px; font-weight: 600;">To</span>
            <input #toDateInput type="date" class="form-control form-control-sm border-0 p-0"
              style="font-size: 12px; height: 20px; width: 130px;" [min]="fromDate" [class.blocked-date]="!fromDate"
              (change)="onToDateChange(toDateInput.value)" />

            <div class="vr" style="height: 26px;"></div>

            <!-- Division -->
            <span style="font-size: 11px; font-weight: 600;">Division</span>
            <select class="form-select form-select-sm border-0 p-0" style="font-size: 12px; height: 20px; width: 140px;"
              (change)="onDivisionChange($event)">
              <option selected disabled>select</option>
              <option value="1">HR</option>
              <option value="2">IT</option>
            </select>

            <i class="bi bi-arrow-clockwise text-primary cursor-pointer thick-icon" (click)="clearFilters()"></i>


          </div>
        </div>



        <!-- Small Add Button -->
        <!-- <button class="btn btn-success btn-sm px-3 shadow-none border-0" (click)="addNewRequest()">Add New Request</button> -->

      </div>
    </div>

    <div class="table-responsive scroll-container">
      <div class="table-responsive shadow-m bg-white rounded">
        <div *ngIf="managerRequestList.length > 0; else noData">
          <table class="table table-bordered shadow-none table-hover align-middle mb-0"
            style="table-layout:auto; width:100%;">

            <thead class="table-light">
              <tr>
                <th *ngFor="let key of tableKeys" style="white-space: nowrap; font-size: 14px; line-height: 1.2;">
                  {{ key }}
                </th>
              </tr>
            </thead>

            <tbody class="text-muted">
              <tr *ngFor="let item of managerRequestList" class="cursor-pointer" (click)="manageById(item['S.NO'])">
                <td *ngFor="let key of tableKeys"
                  style="white-space: nowrap; line-height: 0.9; text-transform: capitalize;">
                  <!-- Status Column -->
                  <ng-container *ngIf="key === 'Status'; else normalCell">
                    <span class="badge" [ngClass]="{
                      'bg-warning-subtle text-warning': item[key] === 'Pending Manager Approval',
                      'bg-success-subtle text-success': item[key] === 'Approved',
                      'bg-danger-subtle text-danger': item[key] === 'Rejected'
                    }" style="font-size: 10px;">
                      {{ item[key] }}
                    </span>
                  </ng-container>

                  <!-- Normal Column -->
                  <ng-template #normalCell>
                    <span style="font-size: 12px;">
                      {{ item[key] }}
                    </span>
                  </ng-template>
                </td>
              </tr>

            </tbody>


          </table>
        </div>
        <!-- ====== NO DATA ====== -->
        <ng-template #noData>
          <div class="text-center mt-5 my-3">
            <span class="px-3 py-2 rounded bg-warning-subtle text-warning fw-semibold d-inline-block">
              No records found
            </span>
          </div>
        </ng-template>


      </div>


      <!-- ====== PAGINATION ====== -->
      <div class="d-flex justify-content-between align-items-center mt-1" *ngIf="managerRequestList.length > 0">

        <!-- Showing Records -->
        <span class="small badge custom-bg text-white">
          Showing {{ startIndex }} to {{ endIndex }} of {{ totalRecords }} Records
        </span>

        <!-- Pagination Buttons -->
        <ul class="pagination pagination-sm mb-1">

          <!-- Previous -->
          <li class="page-item">
            <button type="button" class="border-none text-white custom-action-btn px-2 py-1 me-2"
              (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1" [ngClass]="{
                  'custom-bg': currentPage > 1,
                  'bg-secondary': currentPage === 1
                }">
              <i class="bi bi-chevron-left"></i>
            </button>
          </li>

          <!-- Page Info -->
          <li class="page-item me-2 d-none d-md-block">
            <span class="px-3 py-1 small text-dark fw-bold border rounded bg-light">
              Page {{ currentPage }} of {{ totalPages }}
            </span>
          </li>

          <!-- Next -->
          <li class="page-item">
            <button type="button" class="border-none text-white custom-action-btn px-2 py-1"
              (click)="changePage(currentPage + 1)" [disabled]="currentPage >= totalPages" [ngClass]="{
                  'custom-bg': currentPage < totalPages,
                  'bg-secondary': currentPage >= totalPages
                }">
              <i class="bi bi-chevron-right"></i>
            </button>
          </li>

        </ul>
      </div>

    </div>
  </div>
</div>